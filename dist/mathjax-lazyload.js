/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license
 * Lo-Dash 2.1.0 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash exports="amd" include="defer,each,isObject,isArray" -m -o lodash.custom.js`
 */

/*!
 * XRegExp-All 3.0.0-pre
 * <http://xregexp.com/>
 * Steven Levithan ï¿½ 2012 MIT License
 */

/*
!
mathjax-lazyload 0.1
Alberto Leal (c) 2013 MIT License
*/

!function(){var n,t,e;!function(r){function o(n,t){return b.call(n,t)}function i(n,t){var e,r,o,i,a,u,c,l,s,f,p=t&&t.split("/"),h=v.map,g=h&&h["*"]||{};if(n&&"."===n.charAt(0))if(t){for(p=p.slice(0,p.length-1),n=p.concat(n.split("/")),l=0;l<n.length;l+=1)if(f=n[l],"."===f)n.splice(l,1),l-=1;else if(".."===f){if(1===l&&(".."===n[2]||".."===n[0]))break;l>0&&(n.splice(l-1,2),l-=2)}n=n.join("/")}else 0===n.indexOf("./")&&(n=n.substring(2));if((p||g)&&h){for(e=n.split("/"),l=e.length;l>0;l-=1){if(r=e.slice(0,l).join("/"),p)for(s=p.length;s>0;s-=1)if(o=h[p.slice(0,s).join("/")],o&&(o=o[r])){i=o,a=l;break}if(i)break;!u&&g&&g[r]&&(u=g[r],c=l)}!i&&u&&(i=u,a=c),i&&(e.splice(0,a,i),n=e.join("/"))}return n}function a(n,t){return function(){return h.apply(r,w.call(arguments,0).concat([n,t]))}}function u(n){return function(t){return i(t,n)}}function c(n){return function(t){m[n]=t}}function l(n){if(o(y,n)){var t=y[n];delete y[n],x[n]=!0,p.apply(r,t)}if(!o(m,n)&&!o(x,n))throw new Error("No "+n);return m[n]}function s(n){var t,e=n?n.indexOf("!"):-1;return e>-1&&(t=n.substring(0,e),n=n.substring(e+1,n.length)),[t,n]}function f(n){return function(){return v&&v.config&&v.config[n]||{}}}var p,h,g,d,m={},y={},v={},x={},b=Object.prototype.hasOwnProperty,w=[].slice;g=function(n,t){var e,r=s(n),o=r[0];return n=r[1],o&&(o=i(o,t),e=l(o)),o?n=e&&e.normalize?e.normalize(n,u(t)):i(n,t):(n=i(n,t),r=s(n),o=r[0],n=r[1],o&&(e=l(o))),{f:o?o+"!"+n:n,n:n,pr:o,p:e}},d={require:function(n){return a(n)},exports:function(n){var t=m[n];return"undefined"!=typeof t?t:m[n]={}},module:function(n){return{id:n,uri:"",exports:m[n],config:f(n)}}},p=function(n,t,e,i){var u,s,f,p,h,v,b=[];if(i=i||n,"function"==typeof e){for(t=!t.length&&e.length?["require","exports","module"]:t,h=0;h<t.length;h+=1)if(p=g(t[h],i),s=p.f,"require"===s)b[h]=d.require(n);else if("exports"===s)b[h]=d.exports(n),v=!0;else if("module"===s)u=b[h]=d.module(n);else if(o(m,s)||o(y,s)||o(x,s))b[h]=l(s);else{if(!p.p)throw new Error(n+" missing "+s);p.p.load(p.n,a(i,!0),c(s),{}),b[h]=m[s]}f=e.apply(m[n],b),n&&(u&&u.exports!==r&&u.exports!==m[n]?m[n]=u.exports:f===r&&v||(m[n]=f))}else n&&(m[n]=e)},n=t=h=function(n,t,e,o,i){return"string"==typeof n?d[n]?d[n](t):l(g(n,t).f):(n.splice||(v=n,t.splice?(n=t,t=e,e=null):n=r),t=t||function(){},"function"==typeof e&&(e=o,o=i),o?p(r,n,t,e):setTimeout(function(){p(r,n,t,e)},4),h)},h.config=function(n){return v=n,v.deps&&h(v.deps,v.callback),h},n._defined=m,e=function(n,t,e){t.splice||(e=t,t=[]),o(m,n)||o(y,n)||(y[n]=[n,t,e])},e.amd={jQuery:!0}}(),e("almond",function(){}),function(){function n(){return v.pop()||{a:"",b:null,c:"",k:null,configurable:!1,enumerable:!1,"false":!1,d:"",e:"",v:null,g:"","null":!1,number:null,z:null,push:null,h:null,string:null,i:"","true":!1,undefined:!1,j:!1,writable:!1}}function t(){}function r(n){var t=n.k;t&&r(t),n.b=n.k=n.object=n.number=n.string=null,v.length<b&&v.push(n)}function o(){}function i(n,t,e){if("function"!=typeof n)return m;if("undefined"==typeof t)return n;var r=n.__bindData__||U.funcNames&&!n.name;if("undefined"==typeof r){var o=E&&F.call(n);U.funcNames||!o||w.test(o)||(r=!0),(U.funcNames||!r)&&(r=!U.funcDecomp||E.test(o),K(n,r))}if(!0!==r&&r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,o){return n.call(t,e,r,o)};case 4:return function(e,r,o,i){return n.call(t,e,r,o,i)}}return g(n,t)}function a(n,t,e,r,o,i){var u=1&t,l=2&t,p=4&t,h=8&t,g=16&t,d=32&t,m=n;if(!l&&!s(n))throw new TypeError;g&&!e.length&&(t&=-17,g=e=!1),d&&!r.length&&(t&=-33,d=r=!1);var y=n&&n.__bindData__;if(y)return!u||1&y[1]||(y[4]=o),!u&&1&y[1]&&(t|=8),!p||4&y[1]||(y[5]=i),g&&L.apply(y[2]||(y[2]=[]),e),d&&L.apply(y[3]||(y[3]=[]),r),y[1]|=t,a.apply(null,y);if(!u||l||p||d||!(U.fastBind||W&&g))x=function(){var s=arguments,y=u?o:this;return(p||g||d)&&(s=Y.call(s),g&&J.apply(s,e),d&&L.apply(s,r),p&&s.length<i)?(t|=16,a(n,h?t:-4&t,s,null,o,i)):(l&&(n=y[m]),this instanceof x?(y=c(n.prototype),s=n.apply(y,s),f(s)?s:y):n.apply(y,s))};else{if(g){var v=[o];L.apply(v,e)}var x=g?W.apply(n,v):W.call(n,o)}return K(x,Y.call(arguments)),x}function u(){var t=n();t.h=j,t.b=t.c=t.g=t.i="",t.e="t",t.j=!0;for(var e,o=0;e=arguments[o];o++)for(var a in e)t[a]=e[a];o=t.a,t.d=/^[^,]+/.exec(o)[0],e=Function,o="return function("+o+"){",a="var n,t="+t.d+",E="+t.e+";if(!t)return E;"+t.i+";",t.b?(a+="var u=t.length;n=-1;if("+t.b+"){",U.unindexedChars&&(a+="if(s(t)){t=t.split('')}"),a+="while(++n<u){"+t.g+";}}else{"):U.nonEnumArgs&&(a+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+t.g+";}}else{"),U.enumPrototypes&&(a+="var G=typeof t=='function';"),U.enumErrorProps&&(a+="var F=t===k||t instanceof Error;");var u=[];if(U.enumPrototypes&&u.push('!(G&&n=="prototype")'),U.enumErrorProps&&u.push('!(F&&(n=="message"||n=="name"))'),t.j&&t.f)a+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",u.length&&(a+="if("+u.join("&&")+"){"),a+=t.g+";",u.length&&(a+="}"),a+="}";else if(a+="for(n in t){",t.j&&u.push("m.call(t, n)"),u.length&&(a+="if("+u.join("&&")+"){"),a+=t.g+";",u.length&&(a+="}"),a+="}",U.nonEnumShadows){for(a+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)a+="n='"+t.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",t.j||(a+="||(!x[n]&&t[n]!==A[n])"),a+="){"+t.g+"}";a+="}"}return(t.b||U.nonEnumArgs)&&(a+="}"),a+=t.c+";return E",e=e("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",o+a+"}"),r(t),e(i,A,z,B,x,l,X,p,t.f,P,O,Q,_,$,D)}function c(n){return f(n)?H(n):{}}function l(n){return n&&"object"==typeof n&&"number"==typeof n.length&&D.call(n)==S||!1}function s(n){return"function"==typeof n}function f(n){return!(!n||!O[typeof n])}function p(n){return"string"==typeof n||D.call(n)==_}function h(n,t,e){if(t&&"undefined"==typeof e&&X(n)){e=-1;for(var r=n.length;++e<r&&!1!==t(n[e],e,n););}else tt(n,t,e);return n}function g(n,t){return 2<arguments.length?a(n,17,Y.call(arguments,2),null,t):a(n,1,null,null,t)}function d(n){if(!s(n))throw new TypeError;var t=Y.call(arguments,1);return setTimeout(function(){n.apply(y,t)},1)}function m(n){return n}var y,v=[],x={},b=40,w=/^function[ \n\r\t]+\w/,E=/\bthis\b/,j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),S="[object Arguments]",A="[object Error]",_="[object String]",O={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},I=O[typeof window]&&window||this,R=O[typeof exports]&&exports&&!exports.nodeType&&exports,N=O[typeof module]&&module&&!module.nodeType&&module,R=N&&N.exports===R&&R,T=[],z=Error.prototype,P=Object.prototype,$=String.prototype,C=RegExp("^"+(P.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),F=Function.prototype.toString,B=P.hasOwnProperty,L=T.push,q=P.propertyIsEnumerable,D=P.toString,J=T.unshift,M=function(){try{var n={},t=C.test(t=Object.defineProperty)&&t,e=t(n,n,n)&&t}catch(r){}return e}(),W=C.test(W=D.bind)&&W,H=C.test(H=Object.create)&&H,V=C.test(V=Array.isArray)&&V,G=C.test(G=Object.keys)&&G,Y=T.slice,N=C.test(I.attachEvent),Z=W&&!/\n|true/.test(W+N),Q={};Q["[object Array]"]=Q["[object Date]"]=Q["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Q["[object Boolean]"]=Q[_]={constructor:!0,toString:!0,valueOf:!0},Q[A]=Q["[object Function]"]=Q["[object RegExp]"]={constructor:!0,toString:!0},Q["[object Object]"]={constructor:!0},function(){for(var n=j.length;n--;){var t,e=j[n];for(t in Q)B.call(Q,t)&&!B.call(Q[t],e)&&(Q[t][e]=!1)}}();var U=o.support={};!function(){function n(){this.x=1}var t={0:1,length:1},e=[];n.prototype={valueOf:1};for(var r in new n)e.push(r);for(r in arguments);U.argsClass=D.call(arguments)==S,U.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),U.enumErrorProps=q.call(z,"message")||q.call(z,"name"),U.enumPrototypes=q.call(n,"prototype"),U.fastBind=W&&!Z,U.funcDecomp=!C.test(I.l)&&E.test(function(){return this}),U.funcNames="string"==typeof Function.name,U.nonEnumArgs=0!=r,U.nonEnumShadows=!/valueOf/.test(e),U.spliceObjects=(T.splice.call(t,0,1),!t[0]),U.unindexedChars="xx"!="x"[0]+Object("x")[0]}(1),H||(c=function(n){if(f(n)){t.prototype=n;var e=new t;t.prototype=null}return e||{}});var K=M?function(t,e){var o=n();o.value=e,M(t,"__bindData__",o),r(o)}:t;U.argsClass||(l=function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&B.call(n,"callee")||!1});var X=V||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&"[object Array]"==D.call(n)||!1},nt=u({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),V=G?function(n){return f(n)?U.enumPrototypes&&"function"==typeof n||U.nonEnumArgs&&n.length&&l(n)?nt(n):G(n):[]}:nt,tt=u({a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:V,g:"if(e(t[n],n,g)===false)return E"});s(/x/)&&(s=function(n){return"function"==typeof n&&"[object Function]"==D.call(n)}),Z&&R&&"function"==typeof setImmediate&&(d=function(n){if(!s(n))throw new TypeError;return setImmediate.apply(I,arguments)}),o.bind=g,o.defer=d,o.forEach=h,o.keys=V,o.each=h,o.identity=m,o.isArguments=l,o.isArray=X,o.isFunction=s,o.isObject=f,o.isString=p,o.VERSION="2.1.0","function"==typeof e&&"object"==typeof e.amd&&e.amd&&e("lodash",[],function(){return o})}.call(this),function(n){var t;"function"==typeof e?e("xregexp",n):"object"==typeof exports?(t=n(),("object"==typeof module?module.exports=t:exports).XRegExp=t):XRegExp=n()}(function(){var n=function(n){function t(n,t,e){var r;if(e)if(n.__proto__)n.__proto__=m.prototype;else for(r in m.prototype)n[r]=m.prototype[r];return n[v]={captureNames:t},n}function e(n){return b.replace.call(n,/([\s\S])(?=[\s\S]*\1)/g,"")}function r(n,r){if(!m.isRegExp(n))throw new TypeError("Type RegExp expected");var o=b.exec.call(/\/([a-z]*)$/i,String(n))[1];return r=r||{},r.add&&(o=e(o+r.add)),r.remove&&(o=b.replace.call(o,new RegExp("["+r.remove+"]+","g"),"")),n=t(new RegExp(n.source,o),i(n)?n[v].captureNames.slice(0):null,r.addProto)}function o(){return{captureNames:null}}function i(n){return!(!n[v]||!n[v].captureNames)}function a(n,t){if(Array.prototype.indexOf)return n.indexOf(t);var e,r=n.length;for(e=0;r>e;++e)if(n[e]===t)return e;return-1}function u(n,t){return T.call(n)==="[object "+t+"]"}function c(n,t,e){return b.test.call(e.indexOf("x")>-1?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,n.slice(t))}function l(n,t){var r;if(e(t)!==t)throw new SyntaxError("Invalid duplicate regex flag "+t);for(n=b.replace.call(n,/^\(\?([\w$]+)\)/,function(n,r){if(b.test.call(/[gy]/,r))throw new SyntaxError("Cannot use flag g or y in mode modifier "+n);return t=e(t+r),""}),r=0;r<t.length;++r)if(!N[t.charAt(r)])throw new SyntaxError("Unknown regex flag "+t.charAt(r));return{pattern:n,flags:t}}function s(n){return n=n||{},u(n,"String")&&(n=m.forEach(n,/[^\s,]+/,function(n){this[n]=!0},{})),n}function f(n){if(!/^[\w$]$/.test(n))throw new Error("Flag must be a single character A-Za-z0-9_$");N[n]=!0}function p(n,t,e,r,o){for(var i,a,u=S.length,c=null;u--;)if(a=S[u],(a.scope===r||"all"===a.scope)&&(!a.flag||t.indexOf(a.flag)>-1)&&(i=m.exec(n,a.regex,e,"sticky"))){c={matchLength:i[0].length,output:a.handler.call(o,i,r,t),reparse:a.reparse};break}return c}function h(n){m.cache.flush("patterns"),x.astral=n}function g(n){RegExp.prototype.exec=(n?w:b).exec,RegExp.prototype.test=(n?w:b).test,String.prototype.match=(n?w:b).match,String.prototype.replace=(n?w:b).replace,String.prototype.split=(n?w:b).split,x.natives=n}function d(n){if(null==n)throw new TypeError("Cannot convert null or undefined to object");return n}var m,y,v="xregexp",x={astral:!1,natives:!1},b={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},w={},E={},j={},S=[],k="default",A="class",_={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},O=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,I=b.exec.call(/()??/,"")[1]===n,R=RegExp.prototype.sticky!==n,N={g:!0,i:!0,m:!0,y:R},T={}.toString;return m=function(e,o){var i,a,u,c={hasNamedCapture:!1,captureNames:[]},s=k,f="",h=0;if(m.isRegExp(e)){if(o!==n)throw new TypeError("Cannot supply flags when copying a RegExp");return r(e,{addProto:!0})}if(e=e===n?"":String(e),o=o===n?"":String(o),u=e+"***"+o,!j[u]){for(i=l(e,o),e=i.pattern,o=i.flags;h<e.length;){do i=p(e,o,h,s,c),i&&i.reparse&&(e=e.slice(0,h)+i.output+e.slice(h+i.matchLength));while(i&&i.reparse);i?(f+=i.output,h+=i.matchLength||1):(a=m.exec(e,_[s],h,"sticky")[0],f+=a,h+=a.length,"["===a&&s===k?s=A:"]"===a&&s===A&&(s=k))}j[u]={pattern:b.replace.call(f,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:b.replace.call(o,/[^gimy]+/g,""),captures:c.hasNamedCapture?c.captureNames:null}}return u=j[u],t(new RegExp(u.pattern,u.flags),u.captures,!0)},m.prototype=new RegExp,m.version="3.0.0-pre",m.addToken=function(n,t,e){e=e||{};var o,i=e.optionalFlags;if(e.flag&&f(e.flag),i)for(i=b.split.call(i,""),o=0;o<i.length;++o)f(i[o]);S.push({regex:r(n,{add:"g"+(R?"y":"")}),handler:t,scope:e.scope||k,flag:e.flag,reparse:e.reparse}),m.cache.flush("patterns")},m.cache=function(n,t){var e=n+"***"+(t||"");return E[e]||(E[e]=m(n,t))},m.cache.flush=function(n){"patterns"===n?j={}:E={}},m.escape=function(n){return b.replace.call(d(n),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},m.exec=function(n,t,e,i){var a,u,c="g";return R&&(i||t.sticky&&i!==!1)&&(c+="y"),t[v]=t[v]||o(),u=t[v][c]||(t[v][c]=r(t,{add:c,remove:i===!1?"y":""})),u.lastIndex=e=e||0,a=w.exec.call(u,n),i&&a&&a.index!==e&&(a=null),t.global&&(t.lastIndex=a?u.lastIndex:0),a},m.forEach=function(n,t,e,r){for(var o,i=0,a=-1;o=m.exec(n,t,i);)e.call(r,o,++a,n,t),i=o.index+(o[0].length||1);return r},m.globalize=function(n){return r(n,{add:"g",addProto:!0})},m.install=function(n){n=s(n),!x.astral&&n.astral&&h(!0),!x.natives&&n.natives&&g(!0)},m.isInstalled=function(n){return!!x[n]},m.isRegExp=function(n){return"[object RegExp]"===T.call(n)},m.match=function(n,t,e){var i,a,u=t.global&&"one"!==e||"all"===e,c=(u?"g":"")+(t.sticky?"y":"");return t[v]=t[v]||o(),a=t[v][c||"noGY"]||(t[v][c||"noGY"]=r(t,{add:c,remove:"one"===e?"g":""})),i=b.match.call(d(n),a),t.global&&(t.lastIndex="one"===e&&i?i.index+i[0].length:0),u?i||[]:i&&i[0]},m.matchChain=function(n,t){return function e(n,r){var o,i=t[r].regex?t[r]:{regex:t[r]},a=[],u=function(n){if(i.backref){if(!(n.hasOwnProperty(i.backref)||+i.backref<n.length))throw new ReferenceError("Backreference to undefined group: "+i.backref);a.push(n[i.backref]||"")}else a.push(n[0])};for(o=0;o<n.length;++o)m.forEach(n[o],i.regex,u);return r!==t.length-1&&a.length?e(a,r+1):a}([n],0)},m.replace=function(n,t,e,i){var a,u=m.isRegExp(t),c=t.global&&"one"!==i||"all"===i,l=(c?"g":"")+(t.sticky?"y":""),s=t;return u?(t[v]=t[v]||o(),s=t[v][l||"noGY"]||(t[v][l||"noGY"]=r(t,{add:l,remove:"one"===i?"g":""}))):c&&(s=new RegExp(m.escape(String(t)),"g")),a=w.replace.call(d(n),s,e),u&&t.global&&(t.lastIndex=0),a},m.replaceEach=function(n,t){var e,r;for(e=0;e<t.length;++e)r=t[e],n=m.replace(n,r[0],r[1],r[2]);return n},m.split=function(n,t,e){return w.split.call(d(n),t,e)},m.test=function(n,t,e,r){return!!m.exec(n,t,e,r)},m.uninstall=function(n){n=s(n),x.astral&&n.astral&&h(!1),x.natives&&n.natives&&g(!1)},m.union=function(n,t){var e,r,o,i,a=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,c=[],l=0,s=function(n,t,o){var i=r[l-e];if(t){if(++l,i)return"(?<"+i+">"}else if(o)return"\\"+(+o+e);return n};if(!u(n,"Array")||!n.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(i=0;i<n.length;++i)o=n[i],m.isRegExp(o)?(e=l,r=o[v]&&o[v].captureNames||[],c.push(b.replace.call(m(o.source).source,a,s))):c.push(m.escape(o));return m(c.join("|"),t)},w.exec=function(t){var e,o,i,u=this.lastIndex,c=b.exec.apply(this,arguments);if(c){if(!I&&c.length>1&&a(c,"")>-1&&(o=r(this,{remove:"g"}),b.replace.call(String(t).slice(c.index),o,function(){var t,e=arguments.length;for(t=1;e-2>t;++t)arguments[t]===n&&(c[t]=n)})),this[v]&&this[v].captureNames)for(i=1;i<c.length;++i)e=this[v].captureNames[i-1],e&&(c[e]=c[i]);this.global&&!c[0].length&&this.lastIndex>c.index&&(this.lastIndex=c.index)}return this.global||(this.lastIndex=u),c},w.test=function(n){return!!w.exec.call(this,n)},w.match=function(n){var t;if(m.isRegExp(n)){if(n.global)return t=b.match.apply(this,arguments),n.lastIndex=0,t}else n=new RegExp(n);return w.exec.call(n,d(this))},w.replace=function(t,e){var r,o,i,c=m.isRegExp(t);return c?(t[v]&&(o=t[v].captureNames),r=t.lastIndex):t+="",i=u(e,"Function")?b.replace.call(String(this),t,function(){var r,i=arguments;if(o)for(i[0]=new String(i[0]),r=0;r<o.length;++r)o[r]&&(i[0][o[r]]=i[r+1]);return c&&t.global&&(t.lastIndex=i[i.length-2]+i[0].length),e.apply(n,i)}):b.replace.call(null==this?this:String(this),t,function(){var n=arguments;return b.replace.call(String(e),O,function(t,e,r){var i;if(e){if(i=+e,i<=n.length-3)return n[i]||"";if(i=o?a(o,e):-1,0>i)throw new SyntaxError("Backreference to undefined group "+t);return n[i+1]||""}if("$"===r)return"$";if("&"===r||0===+r)return n[0];if("`"===r)return n[n.length-1].slice(0,n[n.length-2]);if("'"===r)return n[n.length-1].slice(n[n.length-2]+n[0].length);if(r=+r,!isNaN(r)){if(r>n.length-3)throw new SyntaxError("Backreference to undefined group "+t);return n[r]||""}throw new SyntaxError("Invalid token "+t)})}),c&&(t.lastIndex=t.global?0:r),i},w.split=function(t,e){if(!m.isRegExp(t))return b.split.apply(this,arguments);var r,o=String(this),i=[],a=t.lastIndex,u=0;return e=(e===n?-1:e)>>>0,m.forEach(o,t,function(n){n.index+n[0].length>u&&(i.push(o.slice(u,n.index)),n.length>1&&n.index<o.length&&Array.prototype.push.apply(i,n.slice(1)),r=n[0].length,u=n.index+r)}),u===o.length?(!b.test.call(t,"")||r)&&i.push(""):i.push(o.slice(u)),t.lastIndex=a,i.length>e?i.slice(0,e):i},y=m.addToken,y(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(n,t){if("B"===n[1]&&t===k)return n[0];throw new SyntaxError("Invalid escape "+n[0])},{scope:"all"}),y(/\[(\^?)]/,function(n){return n[1]?"[\\s\\S]":"\\b\\B"}),y(/\(\?#[^)]*\)/,function(n,t,e){return c(n.input,n.index+n[0].length,e)?"":"(?:)"}),y(/\s+|#.*/,function(n,t,e){return c(n.input,n.index+n[0].length,e)?"":"(?:)"},{flag:"x"}),y(/\./,function(){return"[\\s\\S]"},{flag:"s"}),y(/\\k<([\w$]+)>/,function(n){var t=isNaN(n[1])?a(this.captureNames,n[1])+1:+n[1],e=n.index+n[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+n[0]);return"\\"+t+(e===n.input.length||isNaN(n.input.charAt(e))?"":"(?:)")}),y(/\\(\d+)/,function(n,t){if(!(t===k&&/^[1-9]/.test(n[1])&&+n[1]<=this.captureNames.length)&&"0"!==n[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+n[0]);return n[0]},{scope:"all"}),y(/\(\?P?<([\w$]+)>/,function(n){if(!isNaN(n[1]))throw new SyntaxError("Cannot use integer as capture name "+n[0]);if("length"===n[1]||"__proto__"===n[1])throw new SyntaxError("Cannot use reserved word as capture name "+n[0]);if(a(this.captureNames,n[1])>-1)throw new SyntaxError("Cannot use same name for multiple groups "+n[0]);return this.captureNames.push(n[1]),this.hasNamedCapture=!0,"("}),y(/\((?!\?)/,function(n,t,e){return e.indexOf("n")>-1?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n"}),m}();return n}),function(){function n(n){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,n.apply(t,arguments)}}var t,r,o={};t=this,null!=t&&(r=t.async),o.noConflict=function(){return t.async=r,o};var i=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e+=1)t(n[e],e,n)},a=function(n,t){if(n.map)return n.map(t);var e=[];return i(n,function(n,r,o){e.push(t(n,r,o))}),e},u=function(n,t,e){return n.reduce?n.reduce(t,e):(i(n,function(n,r,o){e=t(e,n,r,o)}),e)},c=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(o.nextTick=process.nextTick,o.setImmediate="undefined"!=typeof setImmediate?setImmediate:o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(n){setImmediate(n)},o.setImmediate=o.nextTick):(o.nextTick=function(n){setTimeout(n,0)},o.setImmediate=o.nextTick),o.each=function(t,e,r){if(r=r||function(){},!t.length)return r();var o=0;i(t,function(i){e(i,n(function(n){n?(r(n),r=function(){}):(o+=1,o>=t.length&&r(null))}))})},o.forEach=o.each,o.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,o=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e(null):o())})};o()},o.forEachSeries=o.eachSeries,o.eachLimit=function(n,t,e,r){var o=l(t);o.apply(null,[n,e,r])},o.forEachLimit=o.eachLimit;var l=function(n){return function(t,e,r){if(r=r||function(){},!t.length||0>=n)return r();var o=0,i=0,a=0;!function u(){if(o>=t.length)return r();for(;n>a&&i<t.length;)i+=1,a+=1,e(t[i-1],function(n){n?(r(n),r=function(){}):(o+=1,a-=1,o>=t.length?r():u())})}()}},s=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[o.each].concat(t))}},f=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[l(n)].concat(e))}},p=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[o.eachSeries].concat(t))}},h=function(n,t,e,r){var o=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e,r){o[n.index]=r,t(e)})},function(n){r(n,o)})};o.map=s(h),o.mapSeries=p(h),o.mapLimit=function(n,t,e,r){return g(t)(n,e,r)};var g=function(n){return f(n,h)};o.reduce=function(n,t,e,r){o.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){r(n,t)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(n,t,e,r){var i=a(n,function(n){return n}).reverse();o.reduce(i,t,e,r)},o.foldr=o.reduceRight;var d=function(n,t,e,r){var o=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&o.push(n),t()})},function(){r(a(o.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};o.filter=s(d),o.filterSeries=p(d),o.select=o.filter,o.selectSeries=o.filterSeries;var m=function(n,t,e,r){var o=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||o.push(n),t()})},function(){r(a(o.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};o.reject=s(m),o.rejectSeries=p(m);var y=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(){r()})};o.detect=s(y),o.detectSeries=p(y),o.some=function(n,t,e){o.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(){e(!1)})},o.any=o.some,o.every=function(n,t,e){o.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(){e(!0)})},o.all=o.every,o.sortBy=function(n,t,e){o.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0};e(null,a(t.sort(r),function(n){return n.value}))})},o.auto=function(n,t){t=t||function(){};var e=c(n);if(!e.length)return t(null);var r={},a=[],l=function(n){a.unshift(n)},s=function(n){for(var t=0;t<a.length;t+=1)if(a[t]===n)return a.splice(t,1),void 0},f=function(){i(a.slice(0),function(n){n()})};l(function(){c(r).length===e.length&&(t(null,r),t=function(){})}),i(e,function(e){var a=n[e]instanceof Function?[n[e]]:n[e],p=function(n){var a=Array.prototype.slice.call(arguments,1);if(a.length<=1&&(a=a[0]),n){var u={};i(c(r),function(n){u[n]=r[n]}),u[e]=a,t(n,u),t=function(){}}else r[e]=a,o.setImmediate(f)},h=a.slice(0,Math.abs(a.length-1))||[],g=function(){return u(h,function(n,t){return n&&r.hasOwnProperty(t)},!0)&&!r.hasOwnProperty(e)};if(g())a[a.length-1](p,r);else{var d=function(){g()&&(s(d),a[a.length-1](p,r))};l(d)}})},o.waterfall=function(n,t){if(t=t||function(){},n.constructor!==Array){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var r=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),a=n.next();a?i.push(r(a)):i.push(t),o.setImmediate(function(){n.apply(null,i)})}}};r(o.iterator(n))()};var v=function(n,t,e){if(e=e||function(){},t.constructor===Array)n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(c(t),function(n,e){t[n](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[n]=o,e(t)})},function(n){e(n,r)})}};o.parallel=function(n,t){v({map:o.map,each:o.each},n,t)},o.parallelLimit=function(n,t,e){v({map:g(t),each:l(t)},n,e)},o.series=function(n,t){if(t=t||function(){},n.constructor===Array)o.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};o.eachSeries(c(n),function(t,r){n[t](function(n){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),e[t]=o,r(n)})},function(n){t(n,e)})}},o.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},o.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var x=function(n,t,e,r){var o=[];n(t,function(n,t){e(n,function(n,e){o=o.concat(e||[]),t(n)})},function(n){r(n,o)})};o.concat=s(x),o.concatSeries=p(x),o.whilst=function(n,t,e){n()?t(function(r){return r?e(r):(o.whilst(n,t,e),void 0)}):e()},o.doWhilst=function(n,t,e){n(function(r){return r?e(r):(t()?o.doWhilst(n,t,e):e(),void 0)})},o.until=function(n,t,e){n()?e():t(function(r){return r?e(r):(o.until(n,t,e),void 0)})},o.doUntil=function(n,t,e){n(function(r){return r?e(r):(t()?e():o.doUntil(n,t,e),void 0)})},o.queue=function(t,e){function r(n,t,r,a){t.constructor!==Array&&(t=[t]),i(t,function(t){var i={data:t,callback:"function"==typeof a?a:null};r?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===e&&n.saturated(),o.setImmediate(n.process)})}void 0===e&&(e=1);var a=0,u={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,push:function(n,t){r(u,n,!1,t)},unshift:function(n,t){r(u,n,!0,t)},process:function(){if(a<u.concurrency&&u.tasks.length){var e=u.tasks.shift();u.empty&&0===u.tasks.length&&u.empty(),a+=1;var r=function(){a-=1,e.callback&&e.callback.apply(e,arguments),u.drain&&0===u.tasks.length+a&&u.drain(),u.process()},o=n(r);t(e.data,o)}},length:function(){return u.tasks.length},running:function(){return a}};return u},o.cargo=function(n,t){var e=!1,r=[],u={tasks:r,payload:t,saturated:null,empty:null,drain:null,push:function(n,e){n.constructor!==Array&&(n=[n]),i(n,function(n){r.push({data:n,callback:"function"==typeof e?e:null}),u.saturated&&r.length===t&&u.saturated()}),o.setImmediate(u.process)},process:function c(){if(!e){if(0===r.length)return u.drain&&u.drain(),void 0;var o="number"==typeof t?r.splice(0,t):r.splice(0),l=a(o,function(n){return n.data});u.empty&&u.empty(),e=!0,n(l,function(){e=!1;var n=arguments;i(o,function(t){t.callback&&t.callback.apply(null,n)}),c()})}},length:function(){return r.length},running:function(){return e}};return u};var b=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&i(e,function(t){console[n](t)}))}]))}};o.log=b("log"),o.dir=b("dir"),o.memoize=function(n,t){var e={},r={};t=t||function(n){return n};var o=function(){var o=Array.prototype.slice.call(arguments),i=o.pop(),a=t.apply(null,o);a in e?i.apply(null,e[a]):a in r?r[a].push(i):(r[a]=[i],n.apply(null,o.concat([function(){e[a]=arguments;var n=r[a];delete r[a];for(var t=0,o=n.length;o>t;t++)n[t].apply(null,arguments)}])))};return o.memo=e,o.unmemoized=n,o},o.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},o.times=function(n,t,e){for(var r=[],i=0;n>i;i++)r.push(i);return o.map(r,t,e)},o.timesSeries=function(n,t,e){for(var r=[],i=0;n>i;i++)r.push(i);return o.mapSeries(r,t,e)},o.compose=function(){var n=Array.prototype.reverse.call(arguments);return function(){var t=this,e=Array.prototype.slice.call(arguments),r=e.pop();o.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){r.apply(t,[n].concat(e))})}};var w=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),o=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},o)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};o.applyEach=s(w),o.applyEachSeries=p(w),o.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof e&&e.amd?e("async",[],function(){return o}):"undefined"!=typeof module&&module.exports?module.exports=o:t.async=o}(),e("app",["require","lodash","lodash","async","lodash","xregexp","async","lodash"],function(n){var t,e;return e=function(){function t(t){var e,r,o;this.init_object_watch(),this.window=t,this.$=void 0,r=this,o=r.watchproperty,o(t,"$",function(e){return r.$=e,o(t,"MathJax",function(t){return o(t,"Hub",function(t){return o(t,"config",function(t){return o(t,"lazytex2jax",function(e){return o(t,"skipStartupTypeset",function(t){var o;o=n("lodash"),t===!0&&o.isObject(e)&&(r.lazytex2jax=e,o=n("lodash"),o.defer(function(n,t){return n.call(t)},r.bootstrap,r))})})})})})}),e=n("async")}return t.prototype.VERSION="0.1",t.prototype.bootstrap=function(){var t,e,r,o,i;o=n("lodash"),t=this.$,e=n("xregexp"),r=this,this.stopRender=!1,i=this.stopRender,t(function(){var n,a,u;return n=function(n){return t(n).find(":not(iframe,script,img,canvas)").addBack().contents().filter(function(){return 3===this.nodeType})},u=r.escapeRegExp,a={},o.each(r.lazytex2jax,function(r,i){o.isArray(r)&&o.each(r,function(r,c){var l,s,f,p;o.isArray(r)&&(p=u(r[0]),l=u(r[1]),f=p+"(.*?)"+l,s=new e.cache(f,"sg"),t(n("body")).each(function(){var n,o,u,l,f,p;o=t(this),n=o.text(),s.test(n)&&(u={},u.start_delimiter=r[0],u.end_delimiter=r[1],l=""+i+"-"+c,u.selector="lazymathjax[name='lazy-load-mathjax-stamp-"+l+"']",a[l]=u,p='<lazymathjax name="lazy-load-mathjax-stamp-'+l+'">$1</lazymathjax>',f=e.replace(n,s,p),o.replaceWith(f))}))})}),r.init_renderMathJax(),t(r.window).on("scroll.lmjx resize.lmjx",function(){return i=!0,clearTimeout(t.data(this,"lmjxeventTimer")),t.data(this,"lmjxeventTimer",setTimeout(function(){var n;return i=!1,n=r.isElementInViewport,o.each(a,function(e){var o,a;return o=t(e.selector),o.size()>0?(a=r.renderMathJax,o.each(function(){var o;return i===!1&&n(t(this).get(0))===!0?(o={elem:this,start_delimiter:e.start_delimiter,end_delimiter:e.end_delimiter},a.call(r,o)):void 0})):void 0})},500))}),t(r.window).trigger("scroll.lmjx")})},t.prototype.init_renderMathJax=function(){var t,e,r;t=n("async"),r=n("lodash"),null==this.queue&&(e=function(n,t){var e,o,i;return o=n.f,i=n._this,e=n._args||[],e.push(t),r.defer(function(n,t,e){return n.apply(t,e)},o,i,e)},this.queue=t.queue(e,5)),null==this.MathJaxQueue&&(this.MathJaxQueue=this.window.MathJax.Hub.queue)},t.prototype.renderMathJax=function(n){var t,e,r,o;o=this.queue,t=this.$,e=function(n,e){var r,o,i,a,u,c;return this.isElementInViewport(n.elem)===!1?e(!0):this.stopRender===!0?e(!0):(r=t(n.elem),c=n.start_delimiter,a=n.end_delimiter,o=t("<mathjax>").html(c+r.text()+a),r.replaceWith(o.get(0)),r.remove(),i=this.MathJaxQueue,u=function(){return e()
},i.Push(["Typeset",MathJax.Hub,o.get(0),e]),void 0)},r={f:e,_this:this,_args:[n]},o.push(r,function(){})},t.prototype.watchproperty=function(n,t,e){null!=(null!=n?n[t]:void 0)?e(n[t]):n.watch(t,function(n,t,r){return e(r),r})},t.prototype.isElementInViewport=function(n){var t,e,r,o,i,a,u,c;return a=n.getBoundingClientRect(),e=document.documentElement,c=this.window.innerWidth||e.clientWidth,u=this.window.innerHeight||e.clientHeight,o=function(n,t){return document.elementFromPoint(n,t)},t="contains"in n?"contains":"compareDocumentPosition",i="contains"===t?1:16,a.right<0||a.bottom<0||a.left>c||a.top>u?!1:(r=o(a.left,a.top))===n||n[t](r)===i||(r=o(a.right,a.top))===n||n[t](r)===i||(r=o(a.right,a.bottom))===n||n[t](r)===i||(r=o(a.left,a.bottom))===n||n[t](r)===i},t.prototype.isElementInViewport_old=function(n){var t;return t=n.getBoundingClientRect(),t.top>=0&&t.left>=0&&t.bottom<=(this.window.innerHeight||document.documentElement.clientHeight)&&t.right<=(this.window.innerWidth||document.documentElement.clientWidth)},t.prototype.escapeRegExp=function(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},t.prototype.init_object_watch=function(){Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(n,t){var e,r,o,i;return o=this[n],r=o,e=function(){return r},i=function(e){return o=r,r=t.call(this,n,o,e)},delete this[n]?Object.defineProperty(this,n,{get:e,set:i,enumerable:!0,configurable:!0}):void 0}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(n){var t;return t=this[n],delete this[n],this[n]=t}})},t}(),t=function(){function n(){}var t;return t=null,n.get=function(n){null==t&&(t=new e(n))},n}()}),function(e){n.config({enforceDefine:!0,urlArgs:"bust="+(new Date).getTime(),paths:{lodash:"libs/lodash.custom",xregexp:"libs/xregexp-amd",async:"libs/async"},shim:{lodash:{exports:"_"},app:{deps:["lodash","xregexp","async"],exports:"_LazyLoad"}}}),t(["app"],function(n){n.get(e)})}(window||(1,eval)("this")),e("main",function(){}),t(["main"])}();